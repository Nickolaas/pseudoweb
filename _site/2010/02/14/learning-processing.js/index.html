<!DOCTYPE html>
<html>
   <head>
      <!-- META -->
      <meta charset="UTF-8">
      <meta name="author" content="Nat Welch" />
      <meta name="description" content="PseudoWeb.net is the blog of Nathaniel 'Nat' Welch" />

      <title>Learning Processing.js</title>

      <!-- RSS -->
      <link href="/atom.xml" rel="alternate" title="Nat Welch's RSS Feed" type="application/atom+xml" />
      <!-- syntax highlighting CSS -->
      <link rel="stylesheet" href="/css/pygments/tango.css" type="text/css" />
      <!-- Homepage CSS -->
      <link rel="stylesheet" href="/css/style.css" type="text/css" media="screen, projection" />
   </head>
   <body>
      <div class="site">
         <div class="header">
            <span id="title"><a href="/">PseudoWeb.Net</a> is <a href="http://natwelch.com/">Nat Welch</a>'s log of stuff.</span> 
            <div id="description">This is a single post, but you can find more in the <a href="/archives/">archives</a>.</div>
         </div>

         <div id="content">
            <div id="post">
   <div class="post-title">Learning Processing.js<a id="permalink" href="/2010/02/14/learning-processing.js/">#</a></div>
      <div class="post-meta">
         <time datetime="2010-02-14 00:00:00 -0800">
            2010-02-14 00:00:00 -0800
         </time>
         
            &mdash; San Luis Obispo, CA
         
      </div>
   <div class="content">
      <p>This quarter I have been taking CSC484 at Cal Poly. CSC484 is a class offered
by the computer science department titled User Centered Interaction Design, and
is taught by Dr. Franz Kurfess.</p>

<p>CSC484 changes every time it is taught, mainly due to the fact that
computer interaction is something that is constantly changing. New devices and
designs are being invented daily, which have the possibility to dramatically
change the space.</p>

<p>This quarter, our class is working with Yahoo, developing possible UIs for some
of their internal tools. My team, team hzzah!, has been tasked with making a
workflow management tool. Basically, Yahoo needs a better UI than the current
gigantic table they have for tracking instances of various workflows/processes
that are being enacted by their IT team. To solve this problem, we are trying
to design a few different interfaces. One of these is a circle with spokes to
describe an entire process and all of the instances of that process that
currently exist.</p>

<p>After a little searching, my team member <a href="http://reedmorse.com/">Reed</a> stumbled
across <a href="http://processingjs.org/">Processing.js</a>.  This little javascript
framework lets you do all kinds of fun HTML5 canvas stuff in a nice abstract
way. Before I walk you through it, I figured I would dump a bunch of it in
front of you.</p>

<div class="highlight"><pre><code class="js">   <span class="o">&lt;</span><span class="nx">script</span> <span class="nx">type</span><span class="o">=</span><span class="s2">&quot;application/processing&quot;</span><span class="o">&gt;</span>
      <span class="nx">Line</span><span class="p">[]</span> <span class="nx">lines</span><span class="o">;</span>
      <span class="nx">int</span> <span class="nx">count</span><span class="o">,</span> <span class="nx">radius</span><span class="o">,</span> <span class="nx">offsetx</span><span class="o">,</span> <span class="nx">offsety</span><span class="o">;</span>
      <span class="nx">Line</span> <span class="nx">lastActive</span><span class="o">;</span>

      <span class="nx">int</span> <span class="nx">areaOfTriangle</span><span class="p">(</span><span class="nx">int</span> <span class="nx">x1</span><span class="o">,</span> <span class="nx">int</span> <span class="nx">y1</span><span class="o">,</span> <span class="nx">int</span> <span class="nx">x2</span><span class="o">,</span> <span class="nx">int</span> <span class="nx">y2</span><span class="o">,</span> <span class="nx">int</span> <span class="nx">x3</span><span class="o">,</span> <span class="nx">int</span> <span class="nx">y3</span><span class="p">)</span> <span class="p">{</span>
         <span class="nx">int</span> <span class="nx">a</span> <span class="o">=</span> <span class="p">((</span><span class="nx">x3</span><span class="o">*</span><span class="nx">y2</span><span class="p">)</span><span class="o">-</span><span class="p">(</span><span class="nx">x2</span><span class="o">*</span><span class="nx">y3</span><span class="p">));</span>
         <span class="nx">int</span> <span class="nx">b</span> <span class="o">=</span> <span class="p">((</span><span class="nx">x3</span><span class="o">*</span><span class="nx">y1</span><span class="p">)</span><span class="o">-</span><span class="p">(</span><span class="nx">x1</span><span class="o">*</span><span class="nx">y3</span><span class="p">));</span>
         <span class="nx">int</span> <span class="nx">c</span> <span class="o">=</span> <span class="p">((</span><span class="nx">x2</span><span class="o">*</span><span class="nx">y1</span><span class="p">)</span><span class="o">-</span><span class="p">(</span><span class="nx">x1</span><span class="o">*</span><span class="nx">y2</span><span class="p">));</span>
         <span class="k">return</span> <span class="nx">a</span> <span class="o">-</span> <span class="nx">b</span> <span class="o">+</span> <span class="nx">c</span><span class="o">;</span>
      <span class="p">}</span>

      <span class="nx">int</span> <span class="nx">negPosZero</span><span class="p">(</span><span class="nx">int</span> <span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
         <span class="k">if</span> <span class="p">(</span><span class="nx">a</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="mi">0</span><span class="o">;</span>
         <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">a</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">?</span> <span class="mi">1</span> <span class="o">:</span> <span class="o">-</span><span class="mi">1</span><span class="o">;</span>
         <span class="p">}</span>
      <span class="p">}</span>

      <span class="c">/**</span>
<span class="c">       * Class for each process instance</span>
<span class="c">       */</span>
      <span class="nx">class</span> <span class="nx">Line</span> <span class="p">{</span>
         <span class="nx">int</span> <span class="nx">x1</span><span class="o">,</span> <span class="nx">y1</span><span class="o">,</span> <span class="nx">x2</span><span class="o">,</span> <span class="nx">y2</span><span class="o">;</span>
         <span class="nx">int</span> <span class="nx">x3</span><span class="o">,</span> <span class="nx">y3</span><span class="o">,</span> <span class="nx">x4</span><span class="o">,</span> <span class="nx">y4</span><span class="o">;</span>
         <span class="nx">int</span> <span class="nx">length</span><span class="o">;</span>
         <span class="nx">int</span> <span class="nx">angle</span><span class="o">;</span>
         <span class="nx">int</span> <span class="nx">color</span><span class="o">;</span>
         <span class="nx">int</span> <span class="nx">boxwidth</span> <span class="o">=</span> <span class="mi">5</span><span class="o">;</span> <span class="c">// half of the width of the box</span>

         <span class="nx">Line</span> <span class="p">(</span><span class="nx">int</span> <span class="nx">l</span><span class="o">,</span> <span class="nx">int</span> <span class="nx">t</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">length</span> <span class="o">=</span> <span class="nx">l</span><span class="o">;</span>
            <span class="nx">angle</span> <span class="o">=</span> <span class="nx">t</span><span class="o">;</span>
            <span class="nx">update</span><span class="p">();</span>
         <span class="p">}</span>

         <span class="nx">void</span> <span class="nx">draw</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">fill</span><span class="p">(</span><span class="err">#</span><span class="nx">C4574E</span><span class="p">);</span>
            <span class="nx">quad</span><span class="p">(</span><span class="nx">x1</span><span class="o">,</span> <span class="nx">y1</span><span class="o">,</span> <span class="nx">x2</span><span class="o">,</span> <span class="nx">y2</span><span class="o">,</span> <span class="nx">x3</span><span class="o">,</span> <span class="nx">y3</span><span class="o">,</span> <span class="nx">x4</span><span class="o">,</span> <span class="nx">y4</span><span class="p">);</span>
         <span class="p">}</span>

         <span class="nx">void</span> <span class="nx">debug</span><span class="p">()</span> <span class="p">{</span>
         <span class="p">}</span>

         <span class="nx">boolean</span> <span class="nx">isPointInside</span><span class="p">(</span><span class="nx">int</span> <span class="nx">x</span><span class="o">,</span> <span class="nx">int</span> <span class="nx">y</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">int</span> <span class="nx">area1</span> <span class="o">=</span> <span class="nx">negPosZero</span><span class="p">(</span><span class="nx">areaOfTriangle</span><span class="p">(</span><span class="nx">x</span><span class="o">,</span> <span class="nx">y</span><span class="o">,</span> <span class="nx">x1</span><span class="o">,</span> <span class="nx">y1</span><span class="o">,</span> <span class="nx">x2</span><span class="o">,</span> <span class="nx">y2</span><span class="p">));</span>
            <span class="nx">int</span> <span class="nx">area2</span> <span class="o">=</span> <span class="nx">negPosZero</span><span class="p">(</span><span class="nx">areaOfTriangle</span><span class="p">(</span><span class="nx">x</span><span class="o">,</span> <span class="nx">y</span><span class="o">,</span> <span class="nx">x2</span><span class="o">,</span> <span class="nx">y2</span><span class="o">,</span> <span class="nx">x3</span><span class="o">,</span> <span class="nx">y3</span><span class="p">));</span>
            <span class="nx">int</span> <span class="nx">area3</span> <span class="o">=</span> <span class="nx">negPosZero</span><span class="p">(</span><span class="nx">areaOfTriangle</span><span class="p">(</span><span class="nx">x</span><span class="o">,</span> <span class="nx">y</span><span class="o">,</span> <span class="nx">x3</span><span class="o">,</span> <span class="nx">y3</span><span class="o">,</span> <span class="nx">x4</span><span class="o">,</span> <span class="nx">y4</span><span class="p">));</span>
            <span class="nx">int</span> <span class="nx">area4</span> <span class="o">=</span> <span class="nx">negPosZero</span><span class="p">(</span><span class="nx">areaOfTriangle</span><span class="p">(</span><span class="nx">x</span><span class="o">,</span> <span class="nx">y</span><span class="o">,</span> <span class="nx">x4</span><span class="o">,</span> <span class="nx">y4</span><span class="o">,</span> <span class="nx">x1</span><span class="o">,</span> <span class="nx">y1</span><span class="p">));</span>

            <span class="k">return</span> <span class="p">((</span><span class="nx">area1</span> <span class="o">==</span> <span class="nx">area2</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">area1</span> <span class="o">==</span> <span class="nx">area3</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">area1</span> <span class="o">==</span> <span class="nx">area4</span><span class="p">));</span>  
         <span class="p">}</span>

         <span class="nx">void</span> <span class="nx">update</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">isPointInside</span><span class="p">(</span><span class="nx">mouseX</span><span class="o">,</span> <span class="nx">mouseY</span><span class="p">))</span> <span class="p">{</span>
               <span class="c">// We are inside. Change colors fire events, etc.</span>
               <span class="nx">changed</span> <span class="o">=</span> <span class="o">!</span><span class="p">(</span><span class="nx">boxwidth</span> <span class="o">!=</span> <span class="mi">20</span><span class="p">);</span>
               <span class="nx">boxwidth</span> <span class="o">=</span> <span class="mi">20</span><span class="o">;</span>
               <span class="nx">lastActive</span> <span class="o">=</span> <span class="k">this</span><span class="o">;</span> 
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
               <span class="nx">changed</span> <span class="o">=</span> <span class="o">!</span><span class="p">(</span><span class="nx">boxwidth</span> <span class="o">!=</span> <span class="mi">5</span><span class="p">);</span>
               <span class="nx">boxwidth</span> <span class="o">=</span> <span class="mi">5</span><span class="o">;</span>
            <span class="p">}</span>

            <span class="k">if</span> <span class="p">(</span><span class="nx">changed</span><span class="p">)</span> <span class="p">{</span>
               <span class="c">// Calculate everything</span>
               <span class="nx">int</span> <span class="nx">a</span> <span class="o">=</span> <span class="nx">offsetx</span><span class="o">;</span>
               <span class="nx">int</span> <span class="nx">b</span> <span class="o">=</span> <span class="nx">offsety</span><span class="o">;</span>
               <span class="nx">int</span> <span class="nx">r</span> <span class="o">=</span> <span class="nx">radius</span><span class="o">;</span>
               <span class="nx">int</span> <span class="nx">t</span> <span class="o">=</span> <span class="nx">angle</span><span class="o">;</span>
               <span class="nx">int</span> <span class="nx">l</span> <span class="o">=</span> <span class="nx">length</span><span class="o">;</span>

               <span class="nx">int</span> <span class="nx">mx1</span> <span class="o">=</span> <span class="nx">a</span>  <span class="o">+</span> <span class="p">(</span><span class="nx">r</span> <span class="o">*</span>  <span class="nx">cos</span><span class="p">(</span><span class="nx">t</span><span class="p">));</span>
               <span class="nx">int</span> <span class="nx">my1</span> <span class="o">=</span> <span class="nx">b</span>  <span class="o">+</span> <span class="p">(</span><span class="nx">r</span> <span class="o">*</span> <span class="o">-</span><span class="nx">sin</span><span class="p">(</span><span class="nx">t</span><span class="p">));</span>
               <span class="nx">int</span> <span class="nx">mx2</span> <span class="o">=</span> <span class="nx">mx1</span> <span class="o">+</span> <span class="p">(</span><span class="nx">l</span> <span class="o">*</span>  <span class="nx">cos</span><span class="p">(</span><span class="nx">t</span><span class="p">));</span>
               <span class="nx">int</span> <span class="nx">my2</span> <span class="o">=</span> <span class="nx">my1</span> <span class="o">+</span> <span class="p">(</span><span class="nx">l</span> <span class="o">*</span> <span class="o">-</span><span class="nx">sin</span><span class="p">(</span><span class="nx">t</span><span class="p">));</span>

               <span class="c">// Slope our center line</span>
               <span class="nx">int</span> <span class="nx">s</span> <span class="o">=</span> <span class="p">((</span><span class="nx">my2</span> <span class="o">-</span> <span class="nx">my1</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="nx">mx2</span> <span class="o">-</span> <span class="nx">mx1</span><span class="p">));</span>

               <span class="c">// slope of perpendicular line</span>
               <span class="nx">int</span> <span class="nx">ps</span> <span class="o">=</span> <span class="p">((</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="nx">s</span><span class="p">);</span>

               <span class="c">// differences </span>
               <span class="nx">int</span> <span class="nx">dx</span> <span class="o">=</span> <span class="nx">sqrt</span><span class="p">(</span><span class="nx">sq</span><span class="p">(</span><span class="nx">boxwidth</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="nx">sq</span><span class="p">(</span><span class="nx">ps</span><span class="p">)))</span> <span class="o">/</span> <span class="mi">2</span>
               <span class="nx">int</span> <span class="nx">dy</span> <span class="o">=</span> <span class="nx">ps</span> <span class="o">*</span> <span class="nx">dx</span>

               <span class="c">// Actualy box boundries</span>
               <span class="nx">x1</span> <span class="o">=</span> <span class="nx">mx1</span> <span class="o">+</span> <span class="nx">dx</span><span class="o">;</span>
               <span class="nx">y1</span> <span class="o">=</span> <span class="nx">my1</span> <span class="o">+</span> <span class="nx">dy</span><span class="o">;</span>
               <span class="nx">x4</span> <span class="o">=</span> <span class="nx">mx1</span> <span class="o">-</span> <span class="nx">dx</span><span class="o">;</span>
               <span class="nx">y4</span> <span class="o">=</span> <span class="nx">my1</span> <span class="o">-</span> <span class="nx">dy</span><span class="o">;</span>

               <span class="nx">x2</span> <span class="o">=</span> <span class="nx">mx2</span> <span class="o">+</span> <span class="nx">dx</span><span class="o">;</span>
               <span class="nx">y2</span> <span class="o">=</span> <span class="nx">my2</span> <span class="o">+</span> <span class="nx">dy</span><span class="o">;</span>
               <span class="nx">x3</span> <span class="o">=</span> <span class="nx">mx2</span> <span class="o">-</span> <span class="nx">dx</span><span class="o">;</span>
               <span class="nx">y3</span> <span class="o">=</span> <span class="nx">my2</span> <span class="o">-</span> <span class="nx">dy</span><span class="o">;</span>
               <span class="nx">changed</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
            <span class="p">}</span>
         <span class="p">}</span>
      <span class="p">}</span>

      <span class="c">// Called once on load</span>
      <span class="nx">void</span> <span class="nx">setup</span><span class="p">()</span> <span class="p">{</span>
         <span class="nx">frameRate</span><span class="p">(</span><span class="mi">40</span><span class="p">);</span>  
         <span class="nx">size</span><span class="p">(</span><span class="mi">400</span><span class="o">,</span> <span class="mi">400</span><span class="p">);</span>
         <span class="nx">stroke</span><span class="p">(</span><span class="mi">255</span><span class="p">);</span>
         <span class="nx">smooth</span><span class="p">();</span>
         <span class="nx">count</span> <span class="o">=</span> <span class="mi">50</span><span class="o">;</span>
         <span class="nx">lines</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Line</span><span class="p">[</span><span class="nx">count</span><span class="p">];</span>

         <span class="nx">offsetx</span> <span class="o">=</span> <span class="mi">200</span><span class="o">;</span>
         <span class="nx">offsety</span> <span class="o">=</span> <span class="mi">200</span><span class="o">;</span>
         <span class="nx">radius</span> <span class="o">=</span> <span class="mi">70</span><span class="o">;</span>

         <span class="k">for</span> <span class="p">(</span><span class="nx">int</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">count</span><span class="o">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">lines</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Line</span><span class="p">(</span><span class="nx">random</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span><span class="o">,</span> <span class="nx">radians</span><span class="p">(</span><span class="nx">random</span><span class="p">(</span><span class="mi">360</span><span class="p">)));</span>
         <span class="p">}</span>
         <span class="nx">lastActive</span> <span class="o">=</span> <span class="nx">lines</span><span class="p">[</span><span class="nx">i</span><span class="o">-</span><span class="mi">1</span><span class="p">];</span> <span class="c">// set the initial last active</span>
      <span class="p">}</span>

      <span class="c">// Called the number of frames per second</span>
      <span class="nx">void</span> <span class="nx">draw</span><span class="p">()</span> <span class="p">{</span>
         <span class="nx">float</span> <span class="nx">x1</span><span class="o">,</span> <span class="nx">y1</span><span class="o">,</span> <span class="nx">x2</span><span class="o">,</span> <span class="nx">y2</span><span class="o">;</span>

         <span class="nx">background</span><span class="p">(</span><span class="mi">255</span><span class="p">);</span>
         <span class="nx">fill</span><span class="p">(</span><span class="err">#</span><span class="mi">8</span><span class="nx">C004E</span><span class="p">);</span>
         <span class="nx">noStroke</span><span class="p">();</span>

         <span class="nx">ellipse</span><span class="p">(</span><span class="nx">offsetx</span><span class="o">,</span> <span class="nx">offsety</span><span class="o">,</span> <span class="nx">radius</span><span class="o">*</span><span class="mi">2</span><span class="o">,</span> <span class="nx">radius</span><span class="o">*</span><span class="mi">2</span><span class="p">);</span>

         <span class="nx">stroke</span><span class="p">(</span><span class="mi">255</span><span class="p">);</span>
         <span class="nx">strokeWeight</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>

         <span class="k">for</span> <span class="p">(</span><span class="nx">int</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">count</span><span class="o">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">lines</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">update</span><span class="p">();</span>
            <span class="nx">lines</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">draw</span><span class="p">();</span>
         <span class="p">}</span>

         <span class="c">// Draw the last active bar last so it sits on top of the rest</span>
         <span class="nx">lastActive</span><span class="p">.</span><span class="nx">update</span><span class="p">();</span>
         <span class="nx">lastActive</span><span class="p">.</span><span class="nx">draw</span><span class="p">();</span> 
      <span class="p">}</span>
   <span class="o">&lt;/</span><span class="nx">script</span><span class="o">&gt;</span>
</code></pre>
</div>


<p>Cool right? There are some interesting things to notice about this code. First
of all, when the page is loaded, the setup function is called. This function
should in theory instantiate your classes and set things that probably will not
change, like background color.</p>

<p>Next checkout the draw function. This is an interesting function because it is
called every time a frame needs to be rendered, which since we have our frames
per second set at 60, this function is called 60 times every second. This can
present some interesting concurrency problems, because if you loop through a
group of functions that modify similar areas of the page (like write text to a
DOM element) you will quickly notice that they are stomping on each other.</p>

<p>Processing.js works using a cartesian plane, so if you take a look at all of
the functions on the <a href="http://processingjs.org/reference">processing.js reference page</a>,
most of them are pretty straight forward. For instance, to draw any sort of
quadrilateral, you just need the four points, and processing.js will just draw
it for you.</p>

<p>Finally, once you have your code written, you probably want to be able to
display it one a page. The processing.js package comes with a very nice little
script to insert your processing code into a canvas element. The file is called
init.js in the archive you can download, but I've also included it here, just
in case.</p>

<div class="highlight"><pre><code class="js"><span class="c">/*</span>
<span class="c"> * This code searches for all the &lt;script type=&quot;application/processing&quot; target=&quot;canvasid&quot;&gt;</span>
<span class="c"> * in your page and loads each script in the target canvas with the proper id.</span>
<span class="c"> * It is useful to smooth the process of adding Processing code in your page and starting</span>
<span class="c"> * the Processing.js engine.</span>
<span class="c"> */</span>

<span class="k">if</span> <span class="p">(</span> <span class="nb">window</span><span class="p">.</span><span class="nx">addEventListener</span> <span class="p">)</span> <span class="p">{</span>
   <span class="nb">window</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">&quot;load&quot;</span><span class="o">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">scripts</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s2">&quot;script&quot;</span><span class="p">);</span>
      
      <span class="k">for</span> <span class="p">(</span> <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">scripts</span><span class="p">.</span><span class="nx">length</span><span class="o">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
         <span class="k">if</span> <span class="p">(</span> <span class="nx">scripts</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">type</span> <span class="o">==</span> <span class="s2">&quot;application/processing&quot;</span> <span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">src</span> <span class="o">=</span> <span class="nx">scripts</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">src</span><span class="o">,</span> <span class="nx">canvas</span> <span class="o">=</span> <span class="nx">scripts</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">nextSibling</span><span class="o">;</span>
   
            <span class="k">if</span> <span class="p">(</span> <span class="nx">src</span> <span class="o">&amp;&amp;</span> <span class="nx">src</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s2">&quot;#&quot;</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
               <span class="nx">canvas</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span> <span class="nx">src</span><span class="p">.</span><span class="nx">substr</span><span class="p">(</span> <span class="nx">src</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s2">&quot;#&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">);</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
               <span class="k">while</span> <span class="p">(</span> <span class="nx">canvas</span> <span class="o">&amp;&amp;</span> <span class="nx">canvas</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">.</span><span class="nx">toUpperCase</span><span class="p">()</span> <span class="o">!=</span> <span class="s2">&quot;CANVAS&quot;</span> <span class="p">)</span>
                  <span class="nx">canvas</span> <span class="o">=</span> <span class="nx">canvas</span><span class="p">.</span><span class="nx">nextSibling</span><span class="o">;</span>
            <span class="p">}</span>

            <span class="k">if</span> <span class="p">(</span> <span class="nx">canvas</span> <span class="p">)</span> <span class="p">{</span>
               <span class="nx">Processing</span><span class="p">(</span><span class="nx">canvas</span><span class="o">,</span> <span class="nx">scripts</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">text</span><span class="p">);</span>
            <span class="p">}</span>
         <span class="p">}</span>
      <span class="p">}</span>
   <span class="p">}</span><span class="o">,</span> <span class="kc">false</span><span class="p">);</span>
<span class="p">}</span>
</code></pre>
</div>


<p>In reality, that's all you need to know. I've found processing.js a really fun
language to code in, because it works well when using mooTools or jquery or any
other javascript framework. Probably my biggest issue is that I've totally
forgotten how to use trigonometry in the years since highschool, so I've spent
a decent amount of time on
<a href="http://en.wikipedia.org/wiki/Trigonometry">Wikipedia</a> and
<a href="http://stackoverflow.com/users/1063/icco">StackOverflow</a> re-learning my maths.</p>

<p>Hasta,<br/>
/Nat</p>

   </div>
</div>

<div id="related">
   <h2>Related Posts</h2>
   <ul class="posts">
      
         <li class="one"><span class="date">2008-08-26 00:00:00 -0700</span> &raquo; <a href="/2008/08/26/advice-for-possible-engineers/">Advice for Possible Engineers</a></li>
      
         <li class="two"><span class="date">2010-01-29 00:00:00 -0800</span> &raquo; <a href="/2010/01/29/delicious-summarizer/">Delicious Summarizer</a></li>
      
         <li class="one"><span class="date">2007-05-18 00:00:00 -0700</span> &raquo; <a href="/2007/05/18/internet-identity-and-appearance/">Internet Identity And Appearance</a></li>
      
   </ul>
</div>
<div id="navigation">
   
   <div id="post-next">
      <a href="/2010/02/18/review-logitech-anywhere-mouse/" title="Review of the Logitech Anywhere Mouse">Next</a> &raquo;
   </div>
   

   
   <div id="post-prev">
      &laquo; <a href="/2010/01/30/the-black-perl/" title="The Black Perl">Previous</a>
   </div>
   
</div>
<div id="comments">
   <!-- Javascript Comments from DISQUS -->
   <script type="text/javascript">  
      //var disqus_developer = 1; 
      var disqus_url = 'http://pseudoweb.net/2010/02/14/learning-processing.js/';
   </script> 
   <div id="disqus_thread"></div><script type="text/javascript" src="http://disqus.com/forums/pseudoweb/embed.js"></script><noscript><a href="http://disqus.com/forums/pseudoweb/?url=ref">View the discussion thread.</a></noscript><a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>
</div>


         </div>

         <div class="footer">
            <div class="contact">
               <p>
                  This blog is built with <a
                     href="http://github.com/mojombo/jekyll">jekyll</a>. The
                  post contents are copy-write <a
                     href="http://natwelch.com/">Nathaniel "Nat" Welch</a>
                  2006-2010. You can find the source of this site on <a
                     href="http://github.com/icco/pseudoweb">github</a>. You
                  can contact Nat at <a
                     href="mailto:nat@natwelch.com">nat@natwelch.com</a>. 
               </p>
               <p id="site-meta">
                  <a href="/atom.xml">RSS</a> &brvbar;
                  <a href="http://validator.w3.org/check?uri=http%3A%2F%2Ficco.github.com%2F">HTML5</a> &brvbar;
                  <a href="http://jigsaw.w3.org/css-validator/check/referer">CSS</a> &brvbar;
                  <a href="http://creativecommons.org/licenses/by-nc-sa/3.0/us/">CC</a>
               </p>
            </div>
         </div>
      </div>

      <!-- Google's MooTools Mirror -->
      <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/mootools/1.2.4/mootools-yui-compressed.js"></script>
      <!-- Local mootools more copy -->
      <script type="text/javascript" src="/js/mootools-1.2.4.2-more.js"></script>
      <script type="text/javascript">
         // Google Analytics
         var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
         document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));</script>
      <script type="text/javascript">
         var pageTracker = _gat._getTracker("UA-333449-1");
         pageTracker._trackPageview();
      </script>

      <!-- Comment count code from disqus -->
      <script type="text/javascript">
         //<![CDATA[
         (function() {
            var links = document.getElementsByTagName('a');
            var query = '?';
            for(var i = 0; i < links.length; i++) {
               if(links[i].href.indexOf('#disqus_thread') >= 0) {
                  query += 'url' + i + '=' + encodeURIComponent(links[i].href) + '&';
               }
            }
            document.write('<script charset="utf-8" type="text/javascript" src="http://disqus.com/forums/pseudoweb/get_num_replies.js' + query + '"></' + 'script>');
         })();
         //]]>
      </script> 
   </body>
</html>
